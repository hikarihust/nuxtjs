                                    NuxtJs cơ bản
                            
Cài đặt NuxtJs và môi trường lập trình
    https://nuxtjs.org/
    node -v 
    npm -v 
    Using create-nuxt-app
    yarn create nuxt-app first-nuxtjs 
        ? Project name: first-nuxtjs
        ? Programming language: JavaScript 
        ? Package manager: Yarn
        ? UI framework: None
        ? Nuxt.js modules: (Press <space> to select, <a> to toggle all, <i> to invert selection)
            Axios
        ? Linting tools: (Press <space> to select, <a> to toggle all, <i> to invert selection)
            ESLint
        ? Testing framework: None
        ? Rendering mode: Universal (SSR / SSG)
        ? Deployment target: Server (Node.js hosting)
        ? Development tools: (Press <space> to select, <a> to toggle all, <i> to invert selection)
            jsconfig.json
        ? Version control system: None
    cd first-nuxtjs
    yarn dev
    To get started:
        cd first-nuxtjs
        yarn dev
    To build & start for production:
        cd first-nuxtjs
        yarn build
        yarn start
    http://localhost:3000/
    Extension 
        Vetur 
        Vue VSCode Snippets 
Cấu trúc thư mục NuxtJs
    Directory Structure
So sánh SSR và CSR
Pages, Routing và Layouts
    Page & Config
        File System Routing
        nuxt.config.js là file cấu hình cho toàn bộ hệ thống của nuxtjs cho phép cấu hình thêm các 
            phần tử khác liên quan 
            components: true, tự động load hết các components có trong thư mục components 
    Dynamic Routes
    Nested Routes
        Có sự kế thừa về giao diện
        Parent 
        --------- <---
        NuxtChild
        Nuxt child component
        <NuxtChild />
    Nuxt Link
    Validate Params
        Không có trong Vuejs
        Có thể kiểm soát được route người dùng nhập vào có đúng hay không
        // '20a' -> NaN -> false -> !false -> true
    Layouts
Dynamic Layouts
    Dynamic Layouts
        req: Được truyền từ client lên Server nên chỉ tồn tại phía Server không tồn tại phía client 
    Error Page
Routes Middleware và Server Middleware
    Routes Middleware
        In your nuxt.config.js, use the router.middleware key.
        Nuxt InitConfig -> Middleware
        Nếu khai báo middleware ở trong component thì meyhod layout() trong component đó sẽ được thực hiện 
            trước rồi sau đó đến middleware
    Server Middleware
        Chỉ chạy được ở phía Server mà thôi 
        Middleware chạy được ở cả 2 phía, ở lần truy cập đầu tiên thì chạy ở phía Server còn ở các lần sau 
            sẽ chạy ở phía client 
Modules trong NuxtJs
    Modules được chạy trước Server middleware. Modules là các thư viện ở bên ngoài
Plugins trong NuxtJs
    https://nuxtjs.org/guides/directory-structure/plugins
    Là các thư viện mở rộng bên ngoài, nếu ko có nhu cầu mở rộng thêm thì có thể sử dụng trực tiếp các thư 
        viện bên ngoài thông qua Plugins, còn nếu có nhu cầu mở rộng thêm hoặc tích hợp nhiều Plugins thành 1 
        Modules thì sử dụng Modules
    Vue notifications
    yarn add vue-notification
    Có 3 cách sử dụng:
        Injected: Nhúng biến/function toàn cục vào đối tượng View 
        Sử dụng plugins trong ứng dụng của NuxtJs 
            Vue.use(Notifications)
            context: Nhúng vào object context
            inject: Nhúng vào trong đối tượng View
Scrolls và Transition
    Scrolls
    Transition
        https://vuejs.org/v2/guide/transitions.html
        Break on -> attribute modifications
        Break on -> subtree modifications
        debug: F12 -> sources
        transform: translate(-30px, 0)
            Chạy từ bên trái qua
        transform: translate(30px, 0)
            Chạy từ phải qua 
Meta Tags và SEO 
    Globally using the nuxt.config.js
    Locally using the head as an object
    Locally using the head as a function so that you have access to data and computed properties.
    Open graph 
    You can also pass each resource an optional body: true to include the resource before the closing </body> tag.
Custom Loading Pages
    throttle: 1000,
        Quy định độ trễ khi hiển thị thanh progress bar
    Using a Custom Loading Component
    https://loading.io/
Store của VueX trong NuxtJs 01
    https://vuex.vuejs.org/guide/state.html
Store của VueX trong NuxtJs 02
    https://vuex.vuejs.org/guide/modules.html

==================================================================================================================

                                            WP Rest API

Cài đặt môi trường lập trình XAMPP
    Download wordpress
    https://wordpress.org/download/
Install Wordpress
    https://wordpress.org/download/
    wordpress -> htdocs/
    Rename wordpress -> wp-api-test
    wp-config-sample.php -> wp-config.php
    Mysql: wp-api-test
    https://api.wordpress.org/secret-key/1.1/salt/
    http://localhost/wp-api-test/
    English(US)
    Site Title: WP API Testing 
    Username: vudinhquang
    Password: 123456
    Confirm use of weak password
    Your Email: test@gmail.com
    Search engine visibility
    -> Install 
    Login 
    http://localhost/wp-api-test/wp-admin/
Wordpress, Database và PHP
    CMS 1
        http://localhost/wp-api-test/wp-admin/
        Settings:
            Site Language
            Membership: Anyone can register
        Apperarance -> Themes 
        Folder wp-content 
        Plugins -> Add New
        Apperarance -> Menus 
            Main Menu -> create Menu 
            Custom Links 
                URL: https://google.com
                Link Text: Link Google
                -> Add to Menu 
        Media: Mục quản lý hình ảnh
            Hình ảnh upload sẽ được lưu tại Folder wp-content/uploads 
        Setting -> Media
            Image sizes: The sizes listed below determine the maximum dimensions in pixels to use when adding an 
                image to the Media Library.
    CMS 2
        User -> Add New 
        Roles and capabilities wordpress 
            https://wordpress.org/support/article/roles-and-capabilities/
            Administrator
            Editor
            Author 
            Contributor 
            Subscriber 
    CMS 3
        Pages -> Add New
            Sample Page -> Quick Edit 
            Slug: trang-mau
            -> Update 
            -> View 
        Posts -> Add New
            Settings -> Document
                Categories -> Add New Category: Front End
                Tags: html5
                Excerpt: Short Description
            Save Drapt/Publish 
        Categories
            Name
            Slug
        Tags Nhập name, tự động sinh ra slug 
            css 
            Front end
    Database 1
        User -> Add New 
            Username (required): test01
            Email (required): test01@gmail.com
            Password: 123456 
            Confirm use of weak password 
        wp_options: Bảng này để lưu các dữ liệu riêng lẻ không có cấu trúc rõ ràng 
        wp_usermeta: Lưu các thông tin thêm của user 
        Database wordpress diagram 
        wp_posts: Tất cả những gì người dùng đăng lên thì đều coi là post như: thông tin tấm hình, menu...            
            Apperarance -> Menus 
                Main Menu -> create Menu 
                Custom Links 
                    URL: https://google.com
                    Link Text: Link Google
                    -> Add to Menu 
    Database 2
        Posts -> Nhap tieu de(http://localhost/wp-api-test/wp-admin/post.php?post=8&action=edit)
            Add New Category: Dien Thoai 
                Add New Category: Xu Huong(Parent Category: Dien Thoai )
                    Add New Category: Appo ABC1(Parent Category: Xu Huong )
            -> Update 
        wp_posts: post=8
        wp_term_relationships: object_id=8
            term_taxonomy_id: 3, 4, 8, 9, 10
        wp_term_taxonomy: term_taxonomy_id = 3, 4, 8, 9, 10
            term_taxonomy_id = 3
                term_id: 3
                taxonomy: category
                parent: 0
            term_taxonomy_id = 4
                term_id: 4
                taxonomy: post_tag
                parent: 0
            term_taxonomy_id = 8
                term_id: 8
                taxonomy: category
                parent: 0
            term_taxonomy_id = 9
                term_id: 9
                taxonomy: category
                parent: 8
            term_taxonomy_id = 10
                term_id: 10
                taxonomy: category
                parent: 9
        wp_terms: 3, 4, 8, 9, 10
            term_id: 3
                name: Front End
                slug: front-end
            term_id: 4
                name: html5
                slug: html5
            term_id: 8
                name: Dien Thoai
                slug: dien-thoai
            term_id: 9
                name: Xu Huong
                slug: xu-huong
            term_id: 10
                name: Appo ABC1
                slug: appo-abc1
Routes và Endpoints trong WP Rest API
    rest api handbook wordpress 
    https://developer.wordpress.org/rest-api/key-concepts/
    http://localhost/wp-api-test/?rest_route=/   ==== http://localhost/wp-api-test/wp-json/ 
    http://localhost/wp-api-test/?rest_route=/wp/v2  ==== http://localhost/wp-api-test/wp-json/wp/v2
    GET:
        http://localhost/wp-api-test/?rest_route=/wp/v2/categories === http://localhost/wp-api-test/wp-json/wp/v2/categories
        http://localhost/wp-api-test/wp-json/wp/v2/categories?per_page=2
        http://localhost/wp-api-test/wp-json/wp/v2/posts
    
==================================================================================================================

                                            Data Fetching phía Server

Get data by CSR fetch
    fetch("http://localhost/wp-api-test/wp-json/wp/v2/categories")
        .then(res => res.json())
        .then(data => console.log(data))
Data Fetching trong Pages
    Axios Modules
        https://axios.nuxtjs.org/setup
        yarn add @nuxtjs/axios
        nuxt.config.js
            modules: [
                '@nuxtjs/axios',
            ],
        $ Shortcuts
        Fetch Style: $axios.$get()
    AsyncData 1 
        AsyncData dùng cho page chứ ko dùng cho component
        https://nuxtjs.org/guide/async-data
        Returning a Promise. 
        Nuxt.js will wait for the promise to be resolved before rendering the component.
        You may want to fetch data and render it on the server-side. Nuxt.js adds an asyncData method to 
        let you handle async operations before initializing the component
    AsyncData 2
        Using async/await
    Handle Error 1
        req khác null/process.server tồn tại -> gọi ở môi trường server nuxtjs 
        req bằng null -> gọi ở môi trường client phía trình duyệt
        catch (e) {
            throw new Error({
                error: 'Bi loi'
            })
        }
            throw sẽ thực hiện ném ra 1 lỗi mới cho nuxtjs thực hiện bắt error và đẩy sang layout khác
            Mỗi trường dev -> lỗi được hiển thị, mà hình đỏ hiển thị lên
            Môi trường production: 
                yarn build 
                yarn start 
                -> Đẩy say layout error 
    Handle Error 2
        Custom trang error(môi trường production)
            .nuxt/views/error.html
            node_modules\@nuxt\config\dist\config.js
            -> nuxt.config.js -> config nội dung messages thì sau khi build nội dung của .nuxt/views/error.html 
                sẽ được cập nhật
                Cũng có thể sửa trực tiếp .nuxt/views/error.html 
            nuxtjs
            server_error
            server_error_details
        Điều hướng người dùng sang trang error layout(layout/error.vue)
        
Data Fetching trong Components
    FetchMethod 1
        Khác với AsyncData, fetch Method có thể gọi được cả trong page và component
        Thứ tự chạy AsyncData -> created -> fetch do đó có thể sử dụng được this 
        fetch không nhận context làm tham số 
        Không merge với data vào object vue 
    FetchMethod 2
Data Fetching trong Store
    Fetch Store
    Nuxt Server Init
        nuxtServerInit 
        ! Only the primary module (in store/index.js) will receive this action
        the action nuxtServerInit is defined in the store and the mode is universal
        Nuxt.js will call it with the context (only from the server-side).
        The context is given to nuxtServerInit as the 2nd argument in the asyncData method.
        1st argument -> vuexContext
            'dispatch',
            'commit',
            'getters',
            'state',
            'rootGetters',
            'rootState'
So sánh các dạng Data Fetching
    asyncData:
        Chỉ được khai báo trong Page 
        Chạy lần đầu tiên ở Server(khi truy cập trực tiếp vào page đó)
        Khi Navigating chạy ở client
        Chạy trước khi sinh ra Component
        Tự động merge với data nếu có return 
    fetch
        Khai báo được cả trong Page và trong Component 
        Chạy lần đầu tiên ở phía Server
        Khi Navigating chạy ở client
        Chạy sau khi sinh ra component 
        Không merge data với vuejs 
    nuxtServerInit 
        Chỉ được khai báo ở trong store root 
        Chạy 1 lần duy nhất ở phía server 
        Không chạy ở phía client 
        Chạy trước khi sinh ra Component
        Chạy trước cả hàm asyncData và fetch
        Nuxt Lifecycle

==================================================================================================================

                                            Cấu hình Project NuxtJs + LAMP Stack

Cấu hình Apache + Proxy + Hosts
    Install Project
        1. Cài đặt Nuxt
            yarn create nuxt-app nuxtjs-blog 
            Project name: (nuxtjs-blog)
            ? Programming language: JavaScript 
            ? Package manager: Yarn
            ? UI framework: None
            ? Nuxt.js modules: (Press <space> to select, <a> to toggle all, <i> to invert selection)
                Axios
            ? Linting tools: (Press <space> to select, <a> to toggle all, <i> to invert selection)
                ESLint
            ? Testing framework: None
            ? Rendering mode: Universal (SSR / SSG)
            ? Deployment target: Server (Node.js hosting)
            ? Development tools: (Press <space> to select, <a> to toggle all, <i> to invert selection)
                jsconfig.json
            ? Version control system: None
            cd nuxtjs-blog
            yarn dev
            To get started:
                cd first-nuxtjs
                yarn dev
            To build & start for production:
                cd first-nuxtjs
                yarn build
                yarn start
            http://localhost:3000/
            Extension 
                Vetur 
                Vue VSCode Snippets 
        2. Cài đặt Wordpress 
            https://wordpress.org/download/
            wordpress -> htdocs/
            Rename wordpress -> wp-api
            wp-config-sample.php -> wp-config.php
            https://api.wordpress.org/secret-key/1.1/salt/
                define( 'AUTH_KEY',         'put your unique phrase here' );
                define( 'SECURE_AUTH_KEY',  'put your unique phrase here' );
                define( 'LOGGED_IN_KEY',    'put your unique phrase here' );
                define( 'NONCE_KEY',        'put your unique phrase here' );
                define( 'AUTH_SALT',        'put your unique phrase here' );
                define( 'SECURE_AUTH_SALT', 'put your unique phrase here' );
                define( 'LOGGED_IN_SALT',   'put your unique phrase here' );
                define( 'NONCE_SALT',       'put your unique phrase here' );
            Mysql: wp-api
            Import data: wp_api.sql
        http://localhost/wp-api/
    Fix Home Url
        wp_api.sql: http://learning-nuxtjs.xyz -> http://localhost
        Import data: wp_api.sql
        http://localhost/wp-api/wp-admin
            user: congluc1902
            pwd: 123456
        Media 
            Copy file in uploads Folder to wp-api/wp-content/uploads 
        Posts: có sẵn 1 số bài viết 
    Proxy Concepts
        rest api handbook wordpress
            https://developer.wordpress.org/rest-api/key-concepts/
        http://localhost/wp-api/?rest_route=/
        http://localhost/wp-api/wp-admin/
            Settings -> Permalink Settings
                Plain -> Save Changes 
                Day and name -> Save Changes 
        http://localhost/wp-api/wp-json
        Hiện tại:
            FE(Nuxt): http://localhost:3000/
            BE: http://localhost/wp-api/wp-json
            ====================================
            Server thực tế learning-nuxtjs.com
            FE: http://learning-nuxtjs.com:3000/
            BE: http://learning-nuxtjs.com/wp-api/wp-json
        Mong muốn là sau khi config xong 
            FE: http://learning-nuxtjs.com
            BE: http://localhost/wp/wp-api/wp-admin
                http://localhost/wp/wp-api/wp-json
        Apache(Proxy) để điều hướng truy cập của người dùng 
            http://learning-nuxtjs.com(PORT mặc định 80) khi người dùng truy cập vào PORT 80 -> cho chạy qua Proxy để 
                điều hướng người dùng nhảy sang PORT là 3000
            http://localhost/wp/wp-api/wp-admin Hiện tại PORT của wordpress là 80 -> lưu sang PORT khác để dùng Proxy
                để điều hướng người dùng sang PORT của backend 
    Config Hosts - Window
        1. Cấu hình domain 
            C:\Windows\System32\drivers\etc\hosts 
                127.0.0.1       learning-nuxtjs.xyz
        yarn dev
        Truy cập: 
            learning-nuxtjs.xyz:3000
            http://learning-nuxtjs.xyz/wp-api/wp-json
            http://learning-nuxtjs.xyz/wp-api/
        http://learning-nuxtjs.xyz/phpmyadmin/
            Xóa hết bảng 
        wp_api.sql:
            http://localhost -> http://learning-nuxtjs.xyz
            Import 
        Truy cập: 
            http://learning-nuxtjs.xyz/wp-api/wp-admin
    Config Proxy và PORT - Window
        https://rada.neocities.org/xampp-windows-proxy-server.html
        1. Truy cập C:\xampp\apache\conf\httpd.conf
        2. Cấu hình lại PORT XAMPP
            Thêm vào: Listen 9999
        3. Kiểm tra xem các Modules trong Apache đã được kích hoạt hay chưa? Các Modules này hỗ trợ cấu hình được Proxy 
            và điều hướng ngầm người dùng ở trong Server 
            LoadModule rewrite_module modules/mod_rewrite.so
            LoadModule proxy_module modules/mod_proxy.so
            LoadModule proxy_http_module modules/mod_proxy_http.so
        4. Copy và Paste đoạn code bên dưới vào file config (C:\xampp\apache\conf\httpd.conf)
            <IfModule mod_proxy.c>
                <VirtualHost *:80>
                    ProxyPass /wp-api/ http://127.0.0.1:9999/wp-api/
                    ProxyPassReverse /wp-api/ http://127.0.0.1:9999/wp-api/

                    ProxyPass / http://127.0.0.1:3000/
                    ProxyPassReverse / http://127.0.0.1:3000/

                    ProxyRequests On
                    ProxyPreserveHost On
                </VirtualHost>

                <VirtualHost *:9999>
                    DocumentRoot "C:/xampp/htdocs"
                    ServerName learning-nuxtjs.xyz
                </VirtualHost>
            </IfModule>
        http://learning-nuxtjs.xyz/wp-api -> Trỏ sang http://127.0.0.1:9999/wp-api/
        http://learning-nuxtjs.xyz/ -> Trỏ sang http://127.0.0.1:3000/
        yarn dev 
            localhost vẫn có PORT là 3000
        -> Truy cập vào Browser để kiểm tra: 
            http://learning-nuxtjs.xyz/
            http://learning-nuxtjs.xyz/wp-api/
            http://learning-nuxtjs.xyz/wp-api/wp-admin/
Xây dựng Components cần thiết
    Mã nguồn html 
    Header & Footer
        Folder assets: Import theo dạng module bằng câu lệnh Import trng vuejs(css..)
        Folder static: Import thông qua đường dẫn URL(image...)
        Import trong nuxt.config.js 
            link: [
                { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' },
                { rel: 'stylesheet', href: 'https://fonts.googleapis.com/css2?family=Muli:ital,wght@0,500;0,600;0,700;1,400&amp;display=swap' },
                { rel: 'stylesheet', href: 'https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&amp;display=swap' },
                { rel: 'stylesheet', href: 'http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css' },
                { rel: 'stylesheet', href: '/assets/libs/bootstrap4/bootstrap-tcl.css' }
            ]
        Import Css
            @import url("~/assets/css/main.css");
            <-> @import url("@/assets/css/main.css");
            @import url("~/assets/css/header.css");
            @import url("~/assets/css/footer.css");
    Import Fanpage
        facebook developer 
            https://developers.facebook.com/docs/
            Social Plugins
            Plugin Trang
            URL Trang Facebook: https://www.facebook.com/facebook
            Lấy mã
                Step 1: Include the JavaScript SDK on your page once, ideally right after the opening body tag.
                    <div id="fb-root"></div>
                    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v8.0" nonce="9kFsQ98A"></script>
                    -> nuxt.config.js
                Step 2: Place this code wherever you want the plugin to appear on your page.
                    <div class="fb-page" data-href="https://www.facebook.com/facebook" data-tabs=""
                        data-width="" data-height="" data-small-header="false" data-adapt-container-width="true"
                        data-hide-cover="false" data-show-facepile="true"><blockquote cite="https://www.facebook.com/facebook"
                        class="fb-xfbml-parse-ignore"><a href="https://www.facebook.com/facebook">Facebook</a></blockquote>
                    </div>
    Latest Articles
    Popular Articles
        slot
        https://qiita.com/aLiz/items/d5e41b4cff9a81856715
    Article Item
    Articles List

==================================================================================================================

                                            Xây dựng các chức năng phía client

Chức năng Latest Articles (FE + BE)
    Extend Axios
        Postman: Import API Blog NuxtJs.postman_collection.json
            http://learning-nuxtjs.xyz/wp-api/wp-json/wp/v2
            {{base_url}}/posts?per_page=2&page=1
            base_url = http://learning-nuxtjs.xyz/wp-api/wp-json/wp/v2
        Axios modules nuxtjs
            https://axios.nuxtjs.org/setup
            yarn add @nuxtjs/axios
            nuxt.config.js
                modules: [
                    '@nuxtjs/axios',
                ],
            Nuxtjs env: Cấu hình biến môi trường(nuxt.config.js)
            Custom $axios.get = $api.get -> Tạo thêm plugin 
                Extending Axios: If you need to customize axios by registering interceptors and changing global config, 
                    you have to create a nuxt plugin.
                    -> axios plugins
    Init Store
    API Latest Posts
        Endpoints
            http://learning-nuxtjs.xyz/wp-api/wp-json/wp/v2/
    Props Latest Posts
    Article Title
    DayJs lib
        https://day.js.org/docs/en/installation/node-js
        yarn add dayjs 
        Changing locales locally
    WP custom
    WP custom thumb 1
        Hiển thị hình ảnh của bài viết
        https://developer.wordpress.org/rest-api/extending-the-rest-api/modifying-responses/
        register_rest_field()
            https://developer.wordpress.org/reference/functions/register_rest_field/
        get featured image url from post id 
            https://developer.wordpress.org/reference/functions/get_the_post_thumbnail_url/
            https://stackoverflow.com/questions/11261883/how-to-get-wordpress-post-featured-image-url
        get_the_post_thumbnail_url()
            $size: post-thumbnail, thumbnail, medium, large
        SELECT * FROM wp_api.wp_options;
            thumbnail_size_w, thumbnail_size_h, medium_size_w, medium_size_h, large_size_w, large_size_h
    WP custom thumb 2
    WP custom author
        wordpress get nickname from author id 
            https://developer.wordpress.org/reference/functions/get_the_author_meta/
    WP custom avatar
        Màn hình Admin -> Plugins -> Add New
            simple local avatars
        WP plugin 
            https://wordpress.org/plugins/
            simple local avatars -> download 
            simple-local-avatars.2.1.1.zip -> wp-api\wp-content\plugins rồi giải nén 
        Màn hình Admin -> Plugins -> Active simple local avatars
        wp_options table -> simple_local_avatars field 
        wp get user avatar url by author id
            https://wordpress.stackexchange.com/questions/59442/how-do-i-get-the-avatar-url-instead-of-an-html-img-tag-when-using-get-avatar
            https://developer.wordpress.org/reference/functions/get_user_meta/
    Render Latest Posts
    